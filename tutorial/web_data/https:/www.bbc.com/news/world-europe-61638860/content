EU leaders say they will block most Russian oil imports by the end of 2022 to punish Moscow for invading Ukraine.
The EU-wide ban will affect oil that arrives by sea - around two-thirds of imports - but not pipeline oil, following opposition from Hungary. 
Poland and Germany have also pledged to end pipeline imports, meaning a total of 90% of Russian oil will be blocked.
European Council chief Charles Michel said the deal cut off a huge source of financing for the Russian war machine.
It is part of a sixth package of sanctions approved at a summit in Brussels, which all 27 member states have had to agree on.
Russia currently supplies 27% of the EU's imported oil and 40% of its gas. The EU pays Russia around €400bn ($430bn, £341bn) a year in return. 
So far, no sanctions on Russian gas exports to the EU have been put in place, although plans to open a new gas pipeline from Russia to Germany have been frozen.
The UK - which gets 8% of its oil needs from Russia - has pledged to phase out Russian oil by the end of the year.
Oil prices climbed on news of the EU embargo, with Brent crude rising above $123 a barrel, its highest level since March.
EU members spent hours struggling to resolve their differences over the ban on Russian oil imports. Hungary, which imports 65% of its oil from Russia through pipelines, was its main opponent. Hungary's Prime Minister, Viktor Orban, has good relations with Russian President Vladimir Putin. 
The compromise followed weeks of wrangling until it was agreed there would be "a temporary exemption for oil that comes through pipelines to the EU", Mr Michel told reporters. 
Because of this, the immediate sanctions will affect only Russian oil being transported into the EU over sea - two-thirds of the total imported from Russia.
But in practice, European Commission President Ursula von der Leyen said the scope of the ban would be wider, because Germany and Poland have volunteered to wind down their own pipeline imports by the end of this year.
"Left over is around 10-11% that is covered by the southern Druzhba," Ms Von der Leyen said, referring to the Russian pipeline supplying oil to Hungary, Slovakia and the Czech Republic. The European Council would revisit this exemption "as soon as possible", she added.  
A senior EU official confirmed that the three landlocked countries were given an additional guarantee that they could obtain supplies of seaborne Russian oil in the event of an interruption to pipeline supply.
The Russian ambassador to the EU, Vladimir Chizhov, said Brussels had "already approached the limits of what is possible in terms of sanctions". 
Speaking to Russian state TV, he predicted "serious problems" if the EU were to try to agree on a gas embargo.
The ban on Russian oil imports was initially proposed by the European Commission - which develops laws for member states - a month ago.
But resistance, notably from Hungary, held up the EU's troubled latest round of sanctions.
Mr Orban declared the agreement a victory for his country, telling Hungarians they could sleep soundly - protected from expensive fuel costs that the embargo would bring to the rest of Europe. 
"We succeeded in defeating the proposal of the European Council which would have forbidden Hungary from using Russian oil," he said in a Facebook video. 
Other landlocked countries, such as Slovakia and the Czech Republic, also asked for more time due to their dependence on Russian oil. Bulgaria, already cut off from Russian gas by Gazprom, had likewise sought opt-outs.
The cost of living crisis being felt across Europe has not helped either. Sky-rocketing energy prices - among other things - have curtailed some EU countries' appetite for sanctions which could also hurt their own economies.
The EU's oil agreement is a compromise deal - but it's also an important one.
Moscow is heavily reliant on its energy exports, and the EU says this deal will cut more than 90% of Russian oil imports by the end of the year.
But considering all the sabre-rattling and anti-Western rhetoric we've been hearing from Vladimir Putin in recent weeks, I suspect the Russian leader is more likely to say to Europe: "Get ready for some more economic pain because of this embargo. Let's see how long your support for Ukraine lasts."
The Kremlin is aware of the differences of opinion within the EU over what to do about Russia - and you can be sure that Putin is going to try to exploit them. 
Russia will look for new markets, but in terms of oil that's not a quick fix. The infrastructure isn't in place to reorient oil exports from Europe to Asia, for example. And if it does sell to Asia - it will have to do so at a discounted price.
There's also the question of Russian gas - an embargo on that could be discussed next.
Ukraine's President Volodymyr Zelensky, who dialled into the summit, urged EU countries to stop their internal "quarrels," stating that they only helped Moscow.
"All quarrels in Europe must end, internal disputes that only encourage Russia to put more and more pressure on you," Mr Zelensky said via video-link.
Latvia's Prime Minister Krisjanis Karins said member countries should not get "bogged down" in their own personal interests.
"It's going to cost us more. But it's only money. The Ukrainians are paying with their lives," he said.
Russia cut off gas supplies to Dutch firm GasTerra on Tuesday for refusing to pay for supplies in roubles. The EU has said paying in Russian currency breaches sanctions and Gazprom has already cut supplies to Poland, Finland and Bulgaria.
