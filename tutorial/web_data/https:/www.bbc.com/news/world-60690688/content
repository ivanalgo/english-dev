South African President Cyril Ramaphosa has said Vladimir Putin will no longer attend a summit there in August.
The International Criminal Court (ICC) has issued a warrant for the Russian president's arrest. 
As a signatory to the court, South Africa should detain suspects in its territory, but President Ramaphosa warned Russia would see this as a declaration of war. 
The rules for war are spelt out in the Geneva Conventions, and other international laws and agreements.
Serious offences such as murder, rape or mass persecution of a group are known as "crimes against humanity" or, in some circumstances, "genocide".
Military forces cannot deliberately attack civilians - nor the infrastructure that they depend on, such as power stations.
Some weapons are banned, such as anti-personnel landmines, and chemical or biological weapons. 
The sick and wounded must be cared for - including injured soldiers, who have rights as prisoners of war. 
The ICC, based in The Hague, was set up to investigate war crimes and crimes against humanity.
It often holds trials on behalf of countries with weak judicial systems, which are unable to prosecute such cases in their own courts.
The UN Commission of Inquiry on Ukraine says Russian authorities took 16,221 children out of Ukraine to Russia. 
It said these deportations "violate international humanitarian law and amount to a war crime".
The UN has also said that Russian forces in Ukraine are responsible for rapes, "widespread" torture and killings:
Ukraine has also accused Russian forces of committing more than 400 war crimes in the Kherson region between March and November 2022. 
In addition, the UN says Russia could be responsible for "crimes against humanity" by attacking civilian infrastructure such as power stations and dams.
Russia has denied all allegations of war crimes or targeting civilians. 
President Putin was due to visit the country in August to attend a conference of the Brics nations (Brazil, Russia, India, China and South Africa).
South Africa's main opposition party, Democratic Alliance, asked the courts to order his arrest, should he arrive. 
However, in documents submitted to the court, President Ramaphosa said this must not happen: "Russia has made it clear that arresting its sitting president would be a declaration of war."
Later, he said that he and President Putin had "mutually" agreed he should not come. Russia's foreign minister, Sergei Lavrov, will attend instead. 
South Africa has ignored the ICC before.
In 2015, it refused to arrest Sudan's then-president, Omar al-Bashir and let him fly out from a South African airbase. 
The ICC had charged him with genocide and war crimes in connection with the conflict in the Darfur region. 
The ICC can bring a prosecution against political leaders for "waging aggressive war" in the event of an unjustified invasion, or conflict not undertaken in self-defence. 
It has been investigating potential war crimes and crimes against humanity in Ukraine carried out as far as 2013, before Russia illegally annexed Crimea. 
In March 2023, it issued arrest warrants against President Putin and Russia's Commissioner for Children's Rights, Ms Maria Lvova-Belova. 
However, Russia is not a signatory to the ICC, so is highly unlikely to extradite Putin or Ms Lvova-Belova. 
The president is not expected to travel to any country which might arrest him.
The first conviction for war crimes in the Ukrainian courts happened in May 2022, when 21-year-old Russian tank commander Vadim Shishimarin was jailed for life. 
He was found guilty of shooting an unarmed civilian, 62-year-old Oleksandr Shelipov, in the north-eastern village of Chupakhivka, a few days after the invasion began. 
At the start of July 2022, Ukraine's prosecutor-general, Iryna Venediktova, said her office was investigating more than 21,000 war crimes and crimes of aggression allegedly committed by Russian forces since the start of the conflict.
She said 600 suspects had been identified, and 80 prosecutions had begun.
According to Reuters, in March 2023, at least 26 war crimes suspects had been convicted by Ukrainian courts. 
