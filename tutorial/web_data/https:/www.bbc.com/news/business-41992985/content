HSBC has agreed to pay €300m ($353m; £266m) to French authorities to settle a long-running investigation into tax evasion by French clients.
The French financial prosecutor's office claimed HSBC's Swiss private banking unit helped clients evade tax.
Europe's largest bank has acknowledged "control weaknesses" and said it had taken firm steps to address them. 
Payment of the fine will close the case against HSBC but two former directors could yet face legal action.
The former chief executive of HSBC's Swiss private bank, Peter Braunwalder, and another executive, Judah Elmaleh, are under investigation.
More than €1.6bn of assets were involved in the scheme, according to a statement from the French financial prosecutor. 
The investigation started in 2014 after a former IT employee leaked stolen data involving thousands of French customers. 
Herve Falciani said he became a whistleblower to help governments track down people who used Swiss bank accounts to evade tax.
A Swiss court sentenced Falciani in absentia to five years in prison for industrial espionage a year later.
The settlement between HSBC's Swiss Private Bank and the French prosecutor was the first such deal to be struck under new French rules introduced in 2016 to allow companies to settle without any finding of guilt, HSBC said.
The banking giant added that it was pleased to resolve "this legacy investigation which relates to conduct that took place many years ago".
