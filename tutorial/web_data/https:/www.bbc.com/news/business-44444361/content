The German government has ordered car maker Daimler to recall 238,000 vehicles in Germany after they were found to be fitted with illegal software that masks diesel emissions.
Across Europe a total of 774,000 diesel vehicles contain "defeat devices" and Daimler said it would recall them all. 
The diesel versions of the Mercedes C-Class, Vito and GLC models are the main ones affected, the ministry said.   
Daimler said it would refit the software but denied any wrongdoing.
It comes three years after VW admitted having fitted "cheat" devices in vehicles that made their engines appear less polluting than they actually were. 
About eleven million cars worldwide were affected in that case.
German transport minister Andreas Scheuer said the ministry and Daimler had "negotiated intensively for many hours" on Monday.
Afterwards he said the ministry had ordered the "immediate" recall of Daimler models in Germany because they contained "illegal shutdown devices". 
"Daimler states that it will, at maximum speed and with co-operative transparency with the authorities, remove the applications in the engine control system which the government objects to," he said. 
The Transport Ministry only has authority to force the recall of vehicles within Germany. 
Daimler refused to elaborate on where the other vehicles would be recalled. It also said the legality of the software would still need to be clarified.
Earlier Daimler chairman, Dieter Zetsche, had said a technical solution had been found to the software problems and that he did not expect the company to be fined.
It is not the first time Daimler has faced problems with its emissions software. Last year it retrofitted three million Mercedes diesel cars built since 2011, but did not call the exercise a recall.
Evercore ISI analyst Arndt Ellinghorst said the recall would not harm the company. 
"The criticised software is part of engine management and so called auxiliary emissions control devices [which can turn off emissions controls during driving for other reasons, such as to protect the engine].
"We don't see any evidence that Daimler was designing software to deliberately cheat on emission testing."
Other car makers have been found to have fitted defeat devices. 
BMW recalled 12,000 diesel cars over the issue in February, while Porsche recalled 60,000 in May. Neither admitted wrongdoing.
